---
layout: post
title: Redis使用
description: 浅析Redis使用中注意的事项
category: blog
---

## Redis是否需要做读写分离

Mysql做读写分离，是因为可以根据读写两个操作定义不同的事务隔离级别，
不同的事务隔离级别使用了不同的锁策略，而不同的锁策略极大的影响了响应性能

## Redis的Expire

Redis的Expier只能针对键失效, 不能针对于具体的值失效.
例如，数据结构类型是set（key-name value), 可以expire key-name time
但是如果数据结构类型是Map(key-name key value), 只能针对key-name失效，key-name失效时，这个key-name下面的所有数据就会被删除
list/set/zset也一样

### 如何针对值做expire?

在value中保存新建时间，每次做读取操作的时候根据保存的时间和当前时间做判断

## Redis的连接

Redis服务器采用事件触发异步非阻塞的方式响应客户端连接，为每个连接打开一个通信socket资源。
默认情况下服务器不会主动关闭连接链路，除非客户端主动的断开连接。
但是可以在后台配置一个时间窗口，针对idle链接（时间窗口内一直没有通信数据传输, 用户没有关闭过)做删除


