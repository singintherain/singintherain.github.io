---
layout: post
title: Mysql事务
description: 浅析Myql事务管理
category: blog
---

事务不解决多线程并发问题，只解决，批量执行的多个操作语句，要么同时成功，要么同时失败

## 事务的隔离级别

repeatable隔离级别下，可重复读有可能造成数据覆盖，
在一个事务中修改的数据，很可能在另外一个事务中给覆盖掉了
这个问题如何解决？
select for update只针对指定行(选择)加行级别锁定

repeatable隔离级别下，会产生幻读影响，会造成更新的时候报重复key错误
这个问题可以在事务中做异常检测

## 嵌套事务

Mysql官方文档明确说明不支持嵌套事务, 但是在业务编程时很可能会出现事务嵌套的需求，
因此需要在应用层提供嵌套事务的实现。
原理很简单，所谓的嵌套事务就是为了能够满足分阶段回滚，而Mysql又提供了savepoint保存点机制，
允许事务回滚到指定的保存点；则在应用层框架设计中，借助savepoint就可以实现嵌套事务。


